<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Roulette | Enhanced</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c0c2e 0%, #1a1a3e 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
        }

        .header h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, #7b68ee, #00ffff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(123, 104, 238, 0.5);
        }

        .header p {
            color: #aaa;
            font-size: 1.1rem;
        }

        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            max-width: 1300px;
            width: 100%;
        }

        /* Wheel Section */
        .wheel-section {
            flex: 1;
            min-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .wheel-wrapper {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 20px 0;
        }

        #wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 8px solid #2a2a5a;
            box-shadow: 
                0 0 30px rgba(123, 104, 238, 0.6),
                inset 0 0 20px rgba(0, 0, 0, 0.8);
            transition: transform 5s cubic-bezier(0.2, 0.8, 0.3, 1);
            background: radial-gradient(circle at center, #111133 0%, #000022 100%);
        }

        #pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            z-index: 10;
            filter: drop-shadow(0 0 8px gold);
        }

        #pointer i {
            color: gold;
            font-size: 40px;
            text-shadow: 0 0 10px #ffd700;
        }

        .slice {
            position: absolute;
            width: 50%;
            height: 50%;
            top: 50%;
            left: 50%;
            transform-origin: 0% 0%;
            clip-path: polygon(0 0, 100% 0, 0 100%);
            display: flex;
            justify-content: flex-start;
            align-items: center;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .slice span {
            font-size: 20px;
            font-weight: bold;
            transform: translate(40px, -15px) rotate(0deg);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }

        .zero-slice {
            background: linear-gradient(135deg, #00a86b 0%, #008055 100%);
            color: white;
        }

        /* Controls */
        .spin-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }

        #spin {
            padding: 16px 40px;
            background: linear-gradient(90deg, #7b68ee, #5d4fdb);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(123, 104, 238, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #spin:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(123, 104, 238, 0.6);
        }

        #spin:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .spin-info {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
        }

        /* Betting Section */
        .betting-section {
            flex: 1;
            min-width: 500px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .player-info {
            display: flex;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(123, 104, 238, 0.3);
            margin-bottom: 10px;
        }

        .chip {
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chip i {
            color: gold;
        }

        .chip-value {
            font-weight: bold;
            color: gold;
        }

        .bet-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 10px;
        }

        .chip-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .chip-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid transparent;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.2rem;
        }

        .chip-btn.active {
            border-color: white;
            transform: scale(1.1);
        }

        .chip-1 {
            background: radial-gradient(circle at 30% 30%, #ff3333, #cc0000);
        }

        .chip-5 {
            background: radial-gradient(circle at 30% 30%, #33cc33, #009900);
        }

        .chip-10 {
            background: radial-gradient(circle at 30% 30%, #3366ff, #0033cc);
        }

        .chip-25 {
            background: radial-gradient(circle at 30% 30%, #ffcc00, #cc9900);
        }

        .chip-50 {
            background: radial-gradient(circle at 30% 30%, #cc33ff, #9900cc);
        }

        .bet-options {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(123, 104, 238, 0.3);
        }

        .bet-options h3 {
            margin-bottom: 15px;
            color: #7b68ee;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .number-select {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .number-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: white;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }

        .number-btn:hover {
            background: rgba(123, 104, 238, 0.3);
        }

        .number-btn.selected {
            background: #7b68ee;
            transform: scale(0.95);
            box-shadow: 0 0 10px rgba(123, 104, 238, 0.8);
        }

        .zero-btn {
            background: linear-gradient(135deg, #00a86b 0%, #008055 100%);
            grid-column: span 2;
        }

        .bet-types {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .bet-type-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .bet-type-btn:hover {
            background: rgba(123, 104, 238, 0.3);
        }

        .bet-type-btn.active {
            background: #7b68ee;
            box-shadow: 0 0 10px rgba(123, 104, 238, 0.8);
        }

        .current-bets {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(123, 104, 238, 0.3);
            max-height: 150px;
            overflow-y: auto;
        }

        .current-bets h3 {
            margin-bottom: 10px;
            color: #7b68ee;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .bet-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .bet-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
        }

        /* Results Section */
        .results-section {
            width: 100%;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #result {
            font-size: 1.8rem;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: all 0.5s;
        }

        .win-result {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            color: #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        .lose-result {
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid #ff3333;
            color: #ff6666;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3);
        }

        .neutral-result {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .history {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 15px;
        }

        .history-item {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .history-win {
            background: #00a86b;
            color: white;
        }

        .history-lose {
            background: #c62828;
            color: white;
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 0.5s infinite;
        }

        @keyframes confetti {
            0% { transform: translateY(0) rotate(0); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .wheel-section, .betting-section {
                min-width: 100%;
            }
        }

        @media (max-width: 600px) {
            .wheel-wrapper {
                width: 320px;
                height: 320px;
            }
            
            .number-select {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .header h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-globe-americas"></i> COSMIC ROULETTE</h1>
        <p>Place your bets and spin the wheel of fortune!</p>
    </div>

    <div class="game-container">
        <!-- Wheel Section -->
        <div class="wheel-section">
            <div class="wheel-wrapper">
                <div id="pointer">
                    <i class="fas fa-caret-down"></i>
                </div>
                <div id="wheel"></div>
            </div>

            <div class="spin-controls">
                <button id="spin">
                    <i class="fas fa-play"></i> SPIN THE WHEEL
                </button>
                
                <div class="spin-info">
                    <div class="speed-control">
                        <span>Speed:</span>
                        <input type="range" id="speedControl" min="1" max="10" value="5">
                    </div>
                    <div id="spinCount">Spins: 0</div>
                </div>
            </div>
        </div>

        <!-- Betting Section -->
        <div class="betting-section">
            <div class="player-info">
                <div class="chip">
                    <i class="fas fa-coins"></i> 
                    <span>Balance: <span class="chip-value" id="balance">1000</span></span>
                </div>
                <div class="chip">
                    <i class="fas fa-dice"></i> 
                    <span>Current Bet: <span class="chip-value" id="currentBet">0</span></span>
                </div>
            </div>

            <div class="chip-selector">
                <div class="chip-btn chip-1 active" data-value="1">1</div>
                <div class="chip-btn chip-5" data-value="5">5</div>
                <div class="chip-btn chip-10" data-value="10">10</div>
                <div class="chip-btn chip-25" data-value="25">25</div>
                <div class="chip-btn chip-50" data-value="50">50</div>
            </div>

            <div class="bet-options">
                <h3><i class="fas fa-dice"></i> SELECT NUMBER</h3>
                <div class="number-select" id="numberSelect">
                    <!-- Numbers will be generated here -->
                </div>
                
                <h3><i class="fas fa-layer-group"></i> BET TYPES</h3>
                <div class="bet-types">
                    <div class="bet-type-btn active" data-type="single">Single Number</div>
                    <div class="bet-type-btn" data-type="even">Even</div>
                    <div class="bet-type-btn" data-type="odd">Odd</div>
                    <div class="bet-type-btn" data-type="red">Red</div>
                    <div class="bet-type-btn" data-type="black">Black</div>
                </div>
                
                <div class="bet-controls">
                    <button id="placeBet" class="chip-btn chip-10" style="border-radius: 8px; width: auto; padding: 0 20px;">
                        <i class="fas fa-plus-circle"></i> Place Bet
                    </button>
                    <button id="clearBets" style="background: rgba(255, 0, 0, 0.2); color: #ff6666; border: 1px solid #ff6666; padding: 10px 20px; border-radius: 8px; cursor: pointer;">
                        <i class="fas fa-trash"></i> Clear Bets
                    </button>
                </div>
            </div>

            <div class="current-bets">
                <h3><i class="fas fa-list"></i> CURRENT BETS</h3>
                <div class="bet-list" id="betList">
                    <!-- Bets will be displayed here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Results Section -->
    <div class="results-section">
        <div id="result" class="neutral-result">
            Place your bet and spin the wheel!
        </div>
        
        <div class="history" id="history">
            <!-- History will be displayed here -->
        </div>
    </div>

    <script>
        // Game configuration
        const gameConfig = {
            numbers: 37, // 0-36 for European roulette
            colors: {
                0: 'green',
                // Red numbers in roulette
                reds: [1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36],
                // Black numbers (all others except 0)
            },
            minBet: 1,
            maxBet: 500,
            startingBalance: 1000,
            speedMultiplier: 3 // Base spin duration
        };

        // Game state
        let gameState = {
            balance: gameConfig.startingBalance,
            currentBet: 0,
            chipValue: 1,
            bets: [],
            wheelRotation: 0,
            isSpinning: false,
            spinCount: 0,
            spinSpeed: 5,
            history: [],
            selectedNumbers: [],
            betType: 'single'
        };

        // DOM Elements
        const wheel = document.getElementById('wheel');
        const spinBtn = document.getElementById('spin');
        const resultDiv = document.getElementById('result');
        const balanceSpan = document.getElementById('balance');
        const currentBetSpan = document.getElementById('currentBet');
        const betList = document.getElementById('betList');
        const numberSelect = document.getElementById('numberSelect');
        const historyDiv = document.getElementById('history');
        const speedControl = document.getElementById('speedControl');
        const spinCountSpan = document.getElementById('spinCount');
        const placeBetBtn = document.getElementById('placeBet');
        const clearBetsBtn = document.getElementById('clearBets');

        // Initialize the game
        function initGame() {
            createWheel();
            createNumberButtons();
            setupEventListeners();
            updateUI();
        }

        // Create the roulette wheel with slices
        function createWheel() {
            wheel.innerHTML = '';
            const angle = 360 / gameConfig.numbers;
            
            for (let i = 0; i < gameConfig.numbers; i++) {
                const slice = document.createElement('div');
                slice.className = 'slice';
                
                // Determine color
                let color;
                if (i === 0) {
                    color = '#00a86b'; // Green for 0
                    slice.classList.add('zero-slice');
                } else if (gameConfig.colors.reds.includes(i)) {
                    color = '#c62828'; // Red
                } else {
                    color = '#111'; // Black
                }
                
                slice.style.background = color;
                slice.style.transform = `rotate(${i * angle}deg)`;
                
                const label = document.createElement('span');
                label.textContent = i;
                label.style.color = i === 0 || gameConfig.colors.reds.includes(i) ? 'white' : '#ddd';
                
                // Position the label correctly
                const labelRotation = -i * angle - angle / 2;
                label.style.transform = `rotate(${labelRotation}deg) translate(120px, 0px)`;
                
                slice.appendChild(label);
                wheel.appendChild(slice);
            }
        }

        // Create number selection buttons
        function createNumberButtons() {
            numberSelect.innerHTML = '';
            
            // Add 0 button
            const zeroBtn = document.createElement('div');
            zeroBtn.className = 'number-btn zero-btn';
            zeroBtn.textContent = '0';
            zeroBtn.dataset.number = '0';
            zeroBtn.addEventListener('click', () => selectNumber(0));
            numberSelect.appendChild(zeroBtn);
            
            // Add numbers 1-36
            for (let i = 1; i < gameConfig.numbers; i++) {
                const numBtn = document.createElement('div');
                numBtn.className = 'number-btn';
                numBtn.textContent = i;
                numBtn.dataset.number = i;
                
                // Set color based on number
                if (gameConfig.colors.reds.includes(i)) {
                    numBtn.style.background = 'rgba(198, 40, 40, 0.3)';
                    numBtn.style.borderColor = '#c62828';
                } else {
                    numBtn.style.background = 'rgba(0, 0, 0, 0.5)';
                    numBtn.style.borderColor = '#333';
                }
                
                numBtn.addEventListener('click', () => selectNumber(i));
                numberSelect.appendChild(numBtn);
            }
        }

        // Select a number for betting
        function selectNumber(number) {
            const index = gameState.selectedNumbers.indexOf(number);
            
            if (index === -1) {
                // Add number to selection
                gameState.selectedNumbers.push(number);
                document.querySelector(`.number-btn[data-number="${number}"]`).classList.add('selected');
            } else {
                // Remove number from selection
                gameState.selectedNumbers.splice(index, 1);
                document.querySelector(`.number-btn[data-number="${number}"]`).classList.remove('selected');
            }
            
            updateUI();
        }

        // Place a bet
        function placeBet() {
            if (gameState.selectedNumbers.length === 0) {
                showMessage('Please select at least one number!', 'error');
                return;
            }
            
            if (gameState.chipValue > gameState.balance) {
                showMessage('Insufficient balance!', 'error');
                return;
            }
            
            const betAmount = gameState.chipValue * gameState.selectedNumbers.length;
            
            if (gameState.balance < betAmount) {
                showMessage(`You need ${betAmount} chips for this bet!`, 'error');
                return;
            }
            
            // Add bets
            gameState.selectedNumbers.forEach(number => {
                gameState.bets.push({
                    number: number,
                    amount: gameState.chipValue,
                    type: gameState.betType,
                    color: number === 0 ? 'green' : (gameConfig.colors.reds.includes(number) ? 'red' : 'black')
                });
            });
            
            // Update balance
            gameState.balance -= betAmount;
            gameState.currentBet += betAmount;
            
            // Clear selection
            gameState.selectedNumbers.forEach(number => {
                document.querySelector(`.number-btn[data-number="${number}"]`).classList.remove('selected');
            });
            gameState.selectedNumbers = [];
            
            updateUI();
            showMessage(`Bet placed: ${betAmount} chips`, 'success');
        }

        // Clear all bets
        function clearBets() {
            // Refund bets to balance
            gameState.balance += gameState.currentBet;
            gameState.bets = [];
            gameState.currentBet = 0;
            gameState.selectedNumbers = [];
            
            // Clear UI selections
            document.querySelectorAll('.number-btn.selected').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            updateUI();
            showMessage('All bets cleared', 'info');
        }

        // Spin the wheel
        function spinWheel() {
            if (gameState.isSpinning) return;
            if (gameState.bets.length === 0) {
                showMessage('Place a bet before spinning!', 'error');
                return;
            }
            
            gameState.isSpinning = true;
            spinBtn.disabled = true;
            
            // Generate a random winning number (0-36)
            const winningNumber = Math.floor(Math.random() * gameConfig.numbers);
            const winningColor = winningNumber === 0 ? 'green' : 
                                gameConfig.colors.reds.includes(winningNumber) ? 'red' : 'black';
            
            // Calculate rotation for the wheel
            const anglePerNumber = 360 / gameConfig.numbers;
            const targetAngle = 360 * 5 + (360 - (winningNumber * anglePerNumber + anglePerNumber / 2));
            
            // Adjust speed based on control
            const speed = (11 - gameState.spinSpeed) * gameConfig.speedMultiplier;
            
            // Apply rotation
            gameState.wheelRotation += targetAngle;
            wheel.style.transition = `transform ${speed}s cubic-bezier(0.2, 0.8, 0.3, 1)`;
            wheel.style.transform = `rotate(${gameState.wheelRotation}deg)`;
            
            // Show spinning message
            resultDiv.textContent = 'Spinning...';
            resultDiv.className = 'neutral-result pulse';
            
            // Determine result after spin completes
            setTimeout(() => {
                // Calculate winnings
                let winnings = 0;
                let winCount = 0;
                
                gameState.bets.forEach(bet => {
                    // Check if bet wins
                    let isWinner = false;
                    
                    if (bet.type === 'single') {
                        isWinner = bet.number === winningNumber;
                    } else if (bet.type === 'even') {
                        isWinner = winningNumber !== 0 && winningNumber % 2 === 0;
                    } else if (bet.type === 'odd') {
                        isWinner = winningNumber !== 0 && winningNumber % 2 === 1;
                    } else if (bet.type === 'red') {
                        isWinner = winningColor === 'red';
                    } else if (bet.type === 'black') {
                        isWinner = winningColor === 'black';
                    }
                    
                    if (isWinner) {
                        // Payout depends on bet type
                        let multiplier = 1;
                        if (bet.type === 'single') multiplier = 36;
                        else if (['even', 'odd', 'red', 'black'].includes(bet.type)) multiplier = 2;
                        
                        winnings += bet.amount * multiplier;
                        winCount++;
                    }
                });
                
                // Update game state
                gameState.balance += winnings;
                gameState.spinCount++;
                spinCountSpan.textContent = `Spins: ${gameState.spinCount}`;
                
                // Add to history
                const historyItem = {
                    number: winningNumber,
                    color: winningColor,
                    win: winnings > 0
                };
                gameState.history.unshift(historyItem);
                if (gameState.history.length > 10) gameState.history.pop();
                
                // Display result
                const isWin = winnings > 0;
                const resultText = isWin 
                    ? `WINNER! Landed on ${winningNumber} (${winningColor}) - You won ${winnings} chips!` 
                    : `LOSE! Landed on ${winningNumber} (${winningColor}) - Better luck next time!`;
                
                resultDiv.textContent = resultText;
                resultDiv.className = isWin ? 'win-result' : 'lose-result';
                
                if (isWin) {
                    createConfetti();
                    showMessage(`Congratulations! You won ${winnings} chips!`, 'success');
                }
                
                // Update history display
                updateHistory();
                
                // Clear bets for next round
                gameState.bets = [];
                gameState.currentBet = 0;
                gameState.isSpinning = false;
                spinBtn.disabled = false;
                
                updateUI();
                
                // Check game over
                if (gameState.balance <= 0) {
                    setTimeout(() => {
                        if (confirm("Game over! You've run out of chips. Start a new game?")) {
                            resetGame();
                        }
                    }, 1000);
                }
            }, speed * 1000);
        }

        // Create confetti animation for wins
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = '50%';
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = '-10px';
                confetti.style.zIndex = '9999';
                confetti.style.pointerEvents = 'none';
                
                document.body.appendChild(confetti);
                
                // Animate
                const animation = confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: 1000 + Math.random() * 2000,
                    easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // Update game history display
        function updateHistory() {
            historyDiv.innerHTML = '';
            
            gameState.history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = `history-item ${item.win ? 'history-win' : 'history-lose'}`;
                historyItem.textContent = item.number;
                historyItem.title = `${item.number} (${item.color}) - ${item.win ? 'Win' : 'Lose'}`;
                historyDiv.appendChild(historyItem);
            });
        }

        // Update UI elements
        function updateUI() {
            // Update balance and bet display
            balanceSpan.textContent = gameState.balance;
            currentBetSpan.textContent = gameState.currentBet;
            
            // Update bet list
            betList.innerHTML = '';
            
            if (gameState.bets.length === 0) {
                betList.innerHTML = '<div style="text-align: center; color: #aaa; padding: 10px;">No bets placed</div>';
            } else {
                // Group bets by number
                const betMap = {};
                gameState.bets.forEach(bet => {
                    if (!betMap[bet.number]) {
                        betMap[bet.number] = {
                            number: bet.number,
                            amount: 0,
                            type: bet.type,
                            color: bet.color
                        };
                    }
                    betMap[bet.number].amount += bet.amount;
                });
                
                // Display grouped bets
                Object.values(betMap).forEach(bet => {
                    const betItem = document.createElement('div');
                    betItem.className = 'bet-item';
                    
                    const numberSpan = document.createElement('span');
                    numberSpan.textContent = `Number ${bet.number} (${bet.color})`;
                    numberSpan.style.color = bet.color === 'red' ? '#ff6666' : 
                                            bet.color === 'green' ? '#00cc88' : '#ddd';
                    
                    const amountSpan = document.createElement('span');
                    amountSpan.textContent = `${bet.amount} chips`;
                    amountSpan.style.color = 'gold';
                    
                    betItem.appendChild(numberSpan);
                    betItem.appendChild(amountSpan);
                    betList.appendChild(betItem);
                });
            }
            
            // Update chip selector active state
            document.querySelectorAll('.chip-btn').forEach(btn => {
                if (parseInt(btn.dataset.value) === gameState.chipValue) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Update bet type selector active state
            document.querySelectorAll('.bet-type-btn').forEach(btn => {
                if (btn.dataset.type === gameState.betType) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        // Show temporary message
        function showMessage(text, type) {
            const originalText = resultDiv.textContent;
            const originalClass = resultDiv.className;
            
            resultDiv.textContent = text;
            resultDiv.className = type === 'error' ? 'lose-result' : 
                                 type === 'success' ? 'win-result' : 'neutral-result';
            
            setTimeout(() => {
                if (!gameState.isSpinning) {
                    resultDiv.textContent = originalText;
                    resultDiv.className = originalClass;
                }
            }, 3000);
        }

        // Reset the game
        function resetGame() {
            gameState.balance = gameConfig.startingBalance;
            gameState.currentBet = 0;
            gameState.bets = [];
            gameState.selectedNumbers = [];
            gameState.spinCount = 0;
            gameState.history = [];
            
            // Clear UI selections
            document.querySelectorAll('.number-btn.selected').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            updateUI();
            updateHistory();
            spinCountSpan.textContent = `Spins: 0`;
            
            resultDiv.textContent = 'Game reset! Place your bet and spin the wheel!';
            resultDiv.className = 'neutral-result';
            
            showMessage('New game started with 1000 chips!', 'success');
        }

        // Set up event listeners
        function setupEventListeners() {
            // Spin button
            spinBtn.addEventListener('click', spinWheel);
            
            // Chip selection
            document.querySelectorAll('.chip-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    gameState.chipValue = parseInt(btn.dataset.value);
                    updateUI();
                });
            });
            
            // Bet type selection
            document.querySelectorAll('.bet-type-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    gameState.betType = btn.dataset.type;
                    
                    // Clear number selection for non-single bets
                    if (gameState.betType !== 'single') {
                        gameState.selectedNumbers.forEach(number => {
                            document.querySelector(`.number-btn[data-number="${number}"]`).classList.remove('selected');
                        });
                        gameState.selectedNumbers = [];
                    }
                    
                    updateUI();
                });
            });
            
            // Place bet button
            placeBetBtn.addEventListener('click', placeBet);
            
            // Clear bets button
            clearBetsBtn.addEventListener('click', clearBets);
            
            // Speed control
            speedControl.addEventListener('input', (e) => {
                gameState.spinSpeed = parseInt(e.target.value);
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Space to spin
                if (e.code === 'Space' && !gameState.isSpinning) {
                    e.preventDefault();
                    spinWheel();
                }
                
                // Number keys 1-5 for chip selection
                if (e.code >= 'Digit1' && e.code <= 'Digit5') {
                    const chipIndex = parseInt(e.code.replace('Digit', '')) - 1;
                    const chipValues = [1, 5, 10, 25, 50];
                    gameState.chipValue = chipValues[chipIndex];
                    updateUI();
                }
                
                // Escape to clear bets
                if (e.code === 'Escape') {
                    clearBets();
                }
            });
        }

        // Initialize the game when page loads
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>