<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blackjack+</title>
<link rel="icon" type="image/x-icon" href="../icon.jpg">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" rel="stylesheet">

<style>
    body {
        margin: 0;
        background: radial-gradient(circle, #0b0b0f, #000);
        font-family: "DM Sans", sans-serif;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
    }

    #game {
        width: 420px;
        background: #111;
        padding: 25px;
        border-radius: 14px;
        box-shadow: 0 0 25px #000;
        text-align: center;
    }

    h2 {
        margin-top: 0;
        color: #4eb6ff;
        letter-spacing: 1px;
    }

    .section-title {
        margin-top: 15px;
        font-size: 18px;
    }

    .card-zone {
        min-height: 60px;
        margin: 10px 0;
    }

    .card {
        display: inline-block;
        padding: 8px 12px;
        margin: 2px;
        background: #fff;
        color: #000;
        border-radius: 6px;
        font-size: 22px;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 0 8px #fff;
    }

    .hidden-card {
        background: #444;
        color: transparent;
    }

    button {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        margin: 6px;
        transition: 0.15s;
    }

    button:hover {
        transform: scale(1.05);
    }

    #hit { background:#4caf50; }
    #stand { background:#e91e63; }
    #restart { background:#2196f3; display:none; }

    #chips {
        margin-bottom: 8px;
        font-size: 18px;
    }

    #result {
        margin-top: 15px;
        font-size: 20px;
        font-weight: bold;
    }

    .win { color:#4caf50; }
    .lose { color:#e91e63; }
    .push { color:#ffeb3b; }
</style>
</head>
<body>
<div id="game">

    <h2>Blackjack+</h2>
    <div id="chips">Chips: <span id="chipCount">100</span></div>

    <div class="section-title">Dealer</div>
    <div id="dealerCards" class="card-zone"></div>
    <div id="dealerTotal"></div>

    <div class="section-title">You</div>
    <div id="playerCards" class="card-zone"></div>
    <div id="playerTotal"></div>

    <button id="hit">Hit</button>
    <button id="stand">Stand</button>
    <button id="restart">Restart</button>

    <div id="result"></div>
</div>

<script>
const suits = ["♠️","♣️","♦️","♥️"];
const ranks = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];

let deck = [];
let player = [];
let dealer = [];
let chips = 100;
let dealerHidden = true;

function createDeck() {
    deck = [];
    for (let s of suits) {
        for (let r of ranks) {
            deck.push({ rank:r, suit:s });
        }
    }
    
    for (let i = deck.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i+1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
    }
}

function cardValue(c) {
    if (c.rank === "A") return 11;
    if (["J","Q","K"].includes(c.rank)) return 10;
    return parseInt(c.rank);
}

function handTotal(hand) {
    let total = hand.reduce((t,c)=>t+cardValue(c),0);
    let aces = hand.filter(c=>c.rank==="A").length;

    while (total > 21 && aces > 0) {
        total -= 10;
        aces--;
    }
    return total;
}

function renderCards(container, cards, hidden) {
    container.innerHTML = "";
    cards.forEach((c, i) => {
        const div = document.createElement("div");
        div.className = "card";

        if (hidden && i === 0) {
            div.classList.add("hidden-card");
            div.textContent = "??";
        } else {
            div.textContent = c.rank + c.suit;
        }
        container.appendChild(div);
    });
}

function render() {
    renderCards(document.getElementById("playerCards"), player, false);
    renderCards(document.getElementById("dealerCards"), dealer, dealerHidden);

    document.getElementById("playerTotal").textContent =
        "Total: " + handTotal(player);

    if (dealerHidden) {
        document.getElementById("dealerTotal").textContent = "Total: ?";
    } else {
        document.getElementById("dealerTotal").textContent =
            "Total: " + handTotal(dealer);
    }
}

function startGame() {
    if (deck.length < 15) createDeck();

    player = [deck.pop(), deck.pop()];
    dealer = [deck.pop(), deck.pop()];
    dealerHidden = true;

    document.getElementById("result").textContent = "";
    document.getElementById("restart").style.display = "none";
    document.getElementById("hit").style.display = "inline-block";
    document.getElementById("stand").style.display = "inline-block";

    render();
}

function finish(msg, cls="") {
    dealerHidden = false;
    render();

    const r = document.getElementById("result");
    r.textContent = msg;
    r.className = cls;

    document.getElementById("hit").style.display = "none";
    document.getElementById("stand").style.display = "none";
    document.getElementById("restart").style.display = "inline-block";
}

document.getElementById("hit").onclick = () => {
    player.push(deck.pop());
    render();
    if (handTotal(player) > 21) {
        chips -= 10;
        updateChips();
        finish("You busted", "lose");
    }
};

document.getElementById("stand").onclick = () => {
    dealerHidden = false;

    while (handTotal(dealer) < 17) dealer.push(deck.pop());

    render();

    const p = handTotal(player);
    const d = handTotal(dealer);

    if (d > 21) {
        chips += 10;
        updateChips();
        finish("Dealer busted — you win", "win");
    } else if (p > d) {
        chips += 10;
        updateChips();
        finish("You win", "win");
    } else if (p < d) {
        chips -= 10;
        updateChips();
        finish("Dealer wins", "lose");
    } else {
        finish("Push", "push");
    }
};

document.getElementById("restart").onclick = startGame;

function updateChips() {
    document.getElementById("chipCount").textContent = chips;
}

createDeck();
startGame();
</script>
</body>
</html>

