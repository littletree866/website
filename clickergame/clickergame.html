<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Clicker Quest+</title>
  <link rel="icon" href="check.png">
  <style>
    :root {
      --primary: #6e8efb;
      --secondary: #a777e3;
      --dark: #2c3e50;
      --light: #fafafa;
      --money: #27ae60;
      --bonus: #f1c40f;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--dark);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    #game {
      background: rgba(255,255,255,0.95);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
      width: 420px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }
    h1 {margin:0 0 15px;color:var(--dark);}
    #money {font-size:2em;color:var(--money);margin:10px 0;transition:0.3s;}
    button {
      border: none;
      cursor: pointer;
      border-radius: 8px;
      font-weight: bold;
      transition: 0.2s;
    }
    #click {
      font-size: 20px;
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color: white;
      padding: 18px 40px;
      border-radius: 50px;
      margin: 15px 0;
    }
    #click:hover {transform: scale(1.05);}
    #click:active {transform: scale(0.95);}
    .upgrade {
      display: flex;
      justify-content: space-between;
      background: var(--light);
      border-left: 5px solid var(--primary);
      margin: 6px 0;
      padding: 10px;
      border-radius: 8px;
      font-size: 15px;
      align-items: center;
    }
    .upgrade button {
      background: var(--primary);
      color: white;
      padding: 6px 14px;
    }
    .upgrade button:disabled {background: #ccc;cursor:not-allowed;}
    .floating {
      position: absolute;
      color: var(--money);
      font-weight: bold;
      pointer-events: none;
      animation: floatUp 1s ease-out forwards;
    }
    @keyframes floatUp {
      from {opacity:1; transform:translateY(0);}
      to {opacity:0; transform:translateY(-50px);}
    }
    .bonus-coin {
      position: absolute;
      width: 40px; height: 40px;
      border-radius: 50%;
      background: radial-gradient(circle, #f9d71c 0%, #f1b80a 80%);
      border: 2px solid #f5c400;
      cursor: pointer;
      box-shadow: 0 0 15px #f1c40f;
      animation: floatCoin 5s linear;
    }
    @keyframes floatCoin {
      from {opacity:1; transform:translateY(0);}
      to {opacity:0; transform:translateY(-200px);}
    }
    .boost {
      animation: glow 1s infinite alternate;
    }
    @keyframes glow {
      from {box-shadow:0 0 10px var(--bonus);}
      to {box-shadow:0 0 25px var(--bonus);}
    }
  </style>
</head>
<body>
<div id="game">
  <h1>Clicker Quest+</h1>
  <div id="money">$0</div>
  <div id="best" style="font-size:0.9em;color:#555;margin-bottom:6px;">Best: $0</div>
  <button id="click">Click!</button>

  <div class="upgrade">
    <span>Upgrade Click (+$1) — <span id="clickCost">$10</span></span>
    <button id="buyClick">Buy</button>
  </div>
  <div class="upgrade">
    <span>Auto Earner (+$1/s) — <span id="autoCost">$50</span></span>
    <button id="buyAuto">Buy</button>
  </div>
  <div class="upgrade">
    <span>Boost (x2 clicks for 30s) — <span id="boostCost">$200</span></span>
    <button id="buyBoost">Buy</button>
  </div>
</div>

<audio id="clickSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_115b6c2b7b.mp3"></audio>
<audio id="bonusSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_1e44983d06.mp3"></audio>

<script>
let money = 0, perClick = 1, perSec = 0;
let clickCost = 10, autoCost = 50, boostCost = 200;
let boostActive = false, boostTimer = null;

// persisted best
const BEST_KEY = 'clicker_best';
function loadBest(){ return Number(localStorage.getItem(BEST_KEY) || 0); }
function saveBest(v){ localStorage.setItem(BEST_KEY, String(Math.floor(v))); }
const moneyEl = document.getElementById('money');
const clickBtn = document.getElementById('click');
const clickSound = document.getElementById('clickSound');
const bonusSound = document.getElementById('bonusSound');
const clickCostEl = document.getElementById('clickCost');
const autoCostEl = document.getElementById('autoCost');
const boostCostEl = document.getElementById('boostCost');
const bestEl = document.getElementById('best');
let best = loadBest();

function fmt(n){return '$' + Math.floor(n).toLocaleString();}

function updateUI(){
  moneyEl.textContent = fmt(money);
  bestEl.textContent = 'Best: ' + fmt(best);
  clickCostEl.textContent = fmt(clickCost);
  autoCostEl.textContent = fmt(autoCost);
  boostCostEl.textContent = fmt(boostCost);
  document.getElementById('buyClick').disabled = money < clickCost;
  document.getElementById('buyAuto').disabled = money < autoCost;
  document.getElementById('buyBoost').disabled = money < boostCost || boostActive;
}

function addFloatingText(value, x, y){
  const t = document.createElement('div');
  t.className = 'floating';
  t.textContent = '+' + fmt(value);
  t.style.left = x + 'px';
  t.style.top = y + 'px';
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),1000);
}

function clickGain(e){
  const value = boostActive ? perClick * 2 : perClick;
  money += value;
  addFloatingText(value, e.clientX, e.clientY);
  try { clickSound.currentTime = 0; clickSound.play(); } catch(e) { /* ignore */ }
  if (money > best) { best = money; saveBest(best); }
  updateUI();
}

function buyClick(){
  if(money >= clickCost){
    money -= clickCost;
    perClick++;
    clickCost = Math.floor(clickCost * 1.3);
    updateUI();
  }
}
function buyAuto(){
  if(money >= autoCost){
    money -= autoCost;
    perSec++;
    autoCost = Math.floor(autoCost * 1.4);
    updateUI();
  }
}
function buyBoost(){
  if(money >= boostCost && !boostActive){
    money -= boostCost;
    boostActive = true;
    clickBtn.classList.add('boost');
    updateUI();
    clearTimeout(boostTimer);
    boostTimer = setTimeout(()=>{
      boostActive = false;
      clickBtn.classList.remove('boost');
      updateUI();
    },30000);
  }
}
function autoEarnings(){
  money += perSec;
  if(perSec>0){
    const rect = moneyEl.getBoundingClientRect();
    addFloatingText(perSec, rect.x+rect.width/2, rect.y);
  }
  // check best
  if (money > best) { best = money; saveBest(best); }
  updateUI();
}
function spawnBonus(){
  const coin = document.createElement('div');
  coin.className='bonus-coin';
  coin.style.left = Math.random()*80 + 10 + '%';
  coin.style.bottom='20px';
  document.body.appendChild(coin);
  // pass the click event object through to handler so addFloatingText has coordinates
  coin.addEventListener('click',(evt)=>{
    const bonus = Math.floor(Math.random()*200)+100;
    money+=bonus;
    try { bonusSound.currentTime=0; bonusSound.play(); } catch(e){ /* ignore autoplay restrictions */ }
    addFloatingText(bonus, evt.clientX, evt.clientY);
    coin.remove();
    updateUI();
  });
  setTimeout(()=>coin.remove(),5000);
}

clickBtn.onclick = clickGain;
document.getElementById('buyClick').onclick = buyClick;
document.getElementById('buyAuto').onclick = buyAuto;
document.getElementById('buyBoost').onclick = buyBoost;

setInterval(autoEarnings,1000);
setInterval(()=>{ if(Math.random()<0.15) spawnBonus(); },8000);
updateUI();
</script>
</body>
</html>
