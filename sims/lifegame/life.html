<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Wealth</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="../../icon.jpg" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans+Extr+Condensed=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Fira Sans Extra Condensed', sans-serif;
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      gap: 20px;
      padding: 20px;
    }

    .card {
      background: #fff;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, .15);
      text-align: center;
      max-width: 520px;
      width: 90%;
    }

    h1 {
      color: #148A2DCC;
      margin: 0 0 8px 0;
    }

    h2 {
      margin: 6px 0 16px;
    }

    button {
      margin: 8px;
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      font-family: "Fira Sans Extra Condensed", sans-serif;
      cursor: pointer;
      font-size: 15px;
      background: #6e8efb;
      color: #fff;
      transition: background-color .15s;
    }

    button:hover {
      background: #5669d8;
    }

    button:disabled,
    .disabled {
      background: gray;
      cursor: not-allowed;
    }

    #taskArea {
      margin-top: 12px;
    }

    input {
      padding: 6px;
      font-size: 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    #message {
      min-height: 22px;
      font-weight: bold;
      margin-top: 10px;
      opacity: 0;
      transition: opacity .25s;
    }

    .income-section,
    .opportunities-section {
      margin-top: 16px;
      padding: 10px;
      background: #f0f4ff;
      border-radius: 12px;
    }

    .game-panels {
      display: flex;
      gap: 20px;
      margin-top: 12px;
      align-items: flex-start;
      flex-wrap: wrap;
    }

    .panel,
    .market-section {
      flex-shrink: 0;
      width: 300px;
      padding: 16px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, .15);
      max-height: 60vh;
      overflow: auto;
      display: none;
    }

    .market-grid,
    .recipe-grid,
    .building-grid,
    .asset-grid {
      display: grid;
      gap: 10px;
      margin-top: 10px;
    }

    .market-item,
    .recipe-item,
    .building-item,
    .asset-item {
      background: #f8fbff;
      padding: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .task-success {
      color: #1d9a2d;
    }

    .task-error {
      color: #e74c3c;
    }

    @media (max-width:920px) {
      .game-panels {
        flex-direction: column;
        align-items: stretch;
      }

      .panel,
      .market-section {
        width: 100%;
      }
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>üí∞ Wealth</h1>
    <h2 id="money">Money: $1</h2>

    <button id="taskBtn">Do Task</button>
    <button id="freelanceBtn">Free Money?</button>
    <button id="investBtn" class="disabled">Invest $10</button>

    <div id="taskArea"></div>
    <p id="message"></p>

    <div class="income-section">
      <h3>üìà Passive Income</h3>
      <p>Each investment gives +$1 every 2 seconds (shown as continuous income).</p>
    </div>

    <div id="opportunities" class="opportunities-section" style="display:none;">
      <h3>üåü New Opportunities</h3>
      <button id="partTimeBtn">Work Part-Time Job (+$10)</button>
      <button id="stockBtn">Stock Market (Risky)</button>
    </div>

    <div id="highTierOpportunities" class="opportunities-section" style="display:none;">
      <h3>üíé Premium Opportunities</h3>
      <button id="consultingBtn">Consulting Work (+$30)</button>
      <button id="cryptoBtn">Crypto Trading (Very Risky)</button>
      <button id="startupBtn">Launch Startup (-$50, Passive +$5)</button>
    </div>
  </div>

  <div class="game-panels">
    <div id="marketSection" class="market-section">
      <h3>üè™ The Market</h3>
      <p>Buy low, sell high!</p>
      <div id="marketGrid" class="market-grid"></div>
    </div>

    <div id="craftingPanel" class="panel">
      <h3>üõ†Ô∏è Crafting</h3>
      <p>Create valuable items from resources</p>
      <div id="recipeGrid" class="recipe-grid"></div>
    </div>

    <div id="buildingPanel" class="panel">
      <h3>üèóÔ∏è Construction</h3>
      <p>Build and manage businesses</p>
      <div id="buildingGrid" class="building-grid"></div>
    </div>

    <div id="investingPanel" class="panel">
      <h3>üíπ Long-term Investments</h3>
      <p>Invest in appreciating assets</p>
      <div id="assetGrid" class="asset-grid"></div>
    </div>
  </div>

  <script>
    // Minimal restored state + simple render/buy helpers so page scripts parse
    const state = {
      money: 1,
      investments: 0,
      investmentCost: 10,
      investmentsYieldPerSec: 0.5,
      startups: 0,
      startupYieldPerSec: 2.5,
      buildings: [
        { name: "Coffee Shop", cost: 500, incomePerMin: 50, owned: 0 },
        { name: "Tech Store", cost: 1000, incomePerMin: 100, owned: 0 }
      ],
      assets: [
        { name: "Stock Portfolio", cost: 1000, growthPerMin: 0.10, owned: 0 },
        { name: "Real Estate", cost: 5000, growthPerMin: 0.20, owned: 0 }
      ],
      market: {
        items: [
          { name: "Coffee Beans", basePrice: 15, volatility: 0.3, currentPrice: 15, owned: 0 },
          { name: "Tech Gadgets", basePrice: 30, volatility: 0.5, currentPrice: 30, owned: 0 },
          { name: "Rare Gems", basePrice: 50, volatility: 0.7, currentPrice: 50, owned: 0 },
          { name: "Art Pieces", basePrice: 75, volatility: 0.4, currentPrice: 75, owned: 0 },
          { name: "Gold Bars", basePrice: 100, volatility: 0.8, currentPrice: 100, owned: 0 },
          { name: "Electronics", basePrice: 45, volatility: 0.4, currentPrice: 45, owned: 0 }
        ],
        lastUpdate: performance.now()
      },
      crafting: {
        recipes: [
          { name: "Premium Coffee", ingredients: [{ name: "Coffee Beans", amount: 3 }], value: 60 }
        ]
      }
    };

    function formatMoney(n) { return '$' + (Number(n) || 0).toLocaleString(); }

    function renderAssets() {
      // safe minimal render to console if DOM not present
      try {
        const el = document.getElementById('assetGrid');
        if (!el) return;
        el.innerHTML = state.assets.map(a => `
          <div class="asset">
            <div><strong>${a.name}</strong></div>
            <div>Cost: ${formatMoney(a.cost)}</div>
            <div>Owned: ${a.owned}</div>
            <div style="margin-top:6px"><button onclick="buyAsset('${a.name}')" ${state.money < a.cost ? 'disabled' : ''}>Buy</button></div>
          </div>
        `).join('');
      } catch (e) { /* ignore */ }
    }

    function buyAsset(name) {
      const a = state.assets.find(x => x.name === name);
      if (!a) return;
      if (state.money >= a.cost) {
        state.money -= a.cost;
        a.owned++;
        console.log(`Bought ${a.name}`);
        renderAssets();
      } else {
        console.log('Not enough money');
      }
    }

    // initial render attempt
    setTimeout(renderAssets, 0);
  </script>
</body>

</html>