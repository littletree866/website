<!DOCTYPE html>
<html lang="en">
<head>
    <title>Infinity Platformer</title>
    <link rel="icon" href="icon/icon.png">
    <link rel="stylesheet" href="platformergame.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
      crossorigin="anonymous" 
      referrerpolicy="no-referrer" />
    
    <style>
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            z-index: 1000;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .mobile-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 20px;
            z-index: 1000;
        }

        .control-btn {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.4);
            border-radius: 50%;
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        @media (max-width: 768px) {
            .mobile-controls {
                display: flex;
            }
            .control-key {
                display: none;
            }
        }

        .parallax-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .bg-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
        }

        .layer-1 { background-image: url('path/to/background1.png'); }
        .layer-2 { background-image: url('path/to/background2.png'); }
        .layer-3 { background-image: url('path/to/background3.png'); }
    </style>
</head>
<body>
    <div id="loading" class="loading">
        <div class="loading-spinner"></div>
        <p>Loading game...</p>
    </div>
    <div class="parallax-bg">
        <div class="bg-layer layer-1"></div>
        <div class="bg-layer layer-2"></div>
        <div class="bg-layer layer-3"></div>
    </div>
    
    <div id="damage-effect"></div>
    
    <div id="ui">
        <div class="stat"><i class="fas fa-heart" style="color: var(--danger)"></i> <span id="health">150</span></div>
        <div class="stat"><i class="fas fa-star" style="color: var(--warning)"></i> <span id="score">0</span></div>
    </div>
    <div id="level-display"><i class="fas fa-map-marker-alt" style="color: var(--primary)"></i> Level: <span id="level">1</span></div>
    <canvas id="gameCanvas"></canvas>
    
    <div id="gameOverScreen">
        <h1 class="screen-title" style="color: var(--danger)">GAME OVER</h1>
        <p>Final Score: <span id="finalScore">0</span></p>
        <button class="game-button" onclick="resetGame()"><i class="fas fa-redo"></i> Restart</button>
    </div>
    
    <div id="victoryScreen">
        <h1 class="screen-title" style="color: var(--success)">VICTORY!</h1>
        <p>You completed all levels with a score of <span id="finalScoreVictory">0</span></p>
        <button class="game-button" onclick="resetGame()"><i class="fas fa-redo"></i> Play Again</button>
    </div>
    
    <div id="controls-info">
        <div class="control-key"><i class="fas fa-arrow-left"></i> <i class="fas fa-arrow-right"></i> Move</div>
        <div class="control-key"><i class="fas fa-arrow-up"></i> Jump</div>
        <div class="control-key">R Restart</div>
    </div>

    <div class="mobile-controls">
        <div class="control-btn" id="leftBtn">←</div>
        <div class="control-btn" id="jumpBtn">↑</div>
        <div class="control-btn" id="rightBtn">→</div>
    </div>

    <!-- Audio elements -->
    <audio id="jumpSound" src="https://assets.mixkit.co/sfx/preview/mixkit-player-jumping-in-a-video-game-2043.mp3" preload="auto"></audio>
    <audio id="coinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-coin-win-notification-271.mp3" preload="auto"></audio>
    <audio id="hurtSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-explosion-2759.mp3" preload="auto"></audio>
    <audio id="levelSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3" preload="auto"></audio>
    <audio id="bgMusic" loop src="https://assets.mixkit.co/music/preview/mixkit-game-level-music-689.mp3" preload="auto"></audio>

    <script src="platformergame.js"></script>
    <script>
        window.addEventListener('load', () => {
            document.getElementById('loading').style.display = 'none';
        });

        // Add mobile controls handling
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const jumpBtn = document.getElementById('jumpBtn');

        let isTouchingLeft = false;
        let isTouchingRight = false;

        leftBtn.addEventListener('touchstart', () => isTouchingLeft = true);
        leftBtn.addEventListener('touchend', () => isTouchingLeft = false);
        rightBtn.addEventListener('touchstart', () => isTouchingRight = true);
        rightBtn.addEventListener('touchend', () => isTouchingRight = false);
        jumpBtn.addEventListener('touchstart', () => simulateKeyPress('ArrowUp'));

        function simulateKeyPress(key) {
            const event = new KeyboardEvent('keydown', { key });
            document.dispatchEvent(event);
            setTimeout(() => {
                document.dispatchEvent(new KeyboardEvent('keyup', { key }));
            }, 100);
        }

    </script>
</body>
</html>
