<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üí∞Wealth</title>
  <link rel="icon" href="check.png">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      color: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      gap: 20px;
      padding: 20px;
    }
    .card {
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      text-align: center;
      max-width: 500px;
      width: 90%;
    }
    h1 {
      color: #38bb1dc5;
    }
    button {
      margin: 8px;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      background: #6e8efb;
      color: white;
      transition: background-color 0.2s;
    }
    button:hover {
      background: #5669d8;
    }
    .disabled {
      background: gray;
      cursor: not-allowed;
    }
    #taskArea {
      margin-top: 15px;
    }
    input {
      padding: 5px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    #message {
      min-height: 20px;
      font-weight: bold;
      margin-top: 10px;
      transition: opacity 0.5s;
    }
    .income-section, .opportunities-section {
      margin-top: 20px;
      padding: 10px;
      background: #f0f4ff;
      border-radius: 12px;
    }
    .market-section {
      flex-shrink: 0;
      width: 300px;
      padding: 20px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      max-height: 80vh;
      overflow-y: auto;
      display: none;
    }
    .market-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .market-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .market-actions {
      display: flex;
      gap: 5px;
    }
    .market-button {
      padding: 5px 10px;
      font-size: 12px;
    }
    .game-panels {
      display: flex;
      gap: 20px;
    }
    .panel {
      flex-shrink: 0;
      width: 300px;
      padding: 20px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.15);
      max-height: 80vh;
      overflow-y: auto;
      display: none;
    }
    .recipe-grid, .building-grid, .asset-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .recipe-item, .building-item, .asset-item {
      background: #f0f4ff;
      padding: 10px;
      border-radius: 8px;
      text-align: left;
    }
    .task-success {
        color: #38bb1d;
        font-weight: bold;
        animation: fadeIn 0.5s;
    }
    .task-error {
        color: #e74c3c;
        font-weight: bold;
        animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>üí∞ Wealth</h1>
    <h2 id="money">Money: $1</h2>

    <button id="taskBtn">Do Task</button>
    <button id="freelanceBtn">Free Money?</button>
    <button id="investBtn" class="disabled">Invest $10</button>

    <div id="taskArea"></div>
    <p id="message"></p>

    <div class="income-section">
      <h3>üìà Passive Income</h3>
      <p>Each investment gives +$1 every 2 seconds.</p>
    </div>

    <div id="opportunities" class="opportunities-section" style="display:none;">
      <h3>üåü New Opportunities</h3>
      <button id="partTimeBtn">Work Part-Time Job (+$10)</button>
      <button id="stockBtn">Stock Market (Risky)</button>
    </div>

    <div id="highTierOpportunities" class="opportunities-section" style="display:none;">
      <h3>üíé Premium Opportunities</h3>
      <button id="consultingBtn">Consulting Work (+$30)</button>
      <button id="cryptoBtn">Crypto Trading (Very Risky)</button>
      <button id="startupBtn">Launch Startup (-$50, Passive +$5)</button>
    </div>

    </div>
  </div>

  <div class="game-panels">
    <div id="marketSection" class="market-section">
      <h3>üè™ The Market</h3>
      <p>Buy low, sell high!</p>
      <div id="marketGrid" class="market-grid">
        <!-- Market items will be dynamically added here -->
      </div>
    </div>

    <div id="craftingPanel" class="panel">
      <h3>üõ†Ô∏è Crafting</h3>
      <p>Create valuable items from resources</p>
      <div id="recipeGrid" class="recipe-grid">
        <!-- Recipes will be added here -->
      </div>
    </div>

    <div id="buildingPanel" class="panel">
      <h3>üèóÔ∏è Construction</h3>
      <p>Build and manage businesses</p>
      <div id="buildingGrid" class="building-grid">
        <!-- Buildings will be added here -->
      </div>
    </div>

    <div id="investingPanel" class="panel">
      <h3>üíπ Long-term Investments</h3>
      <p>Invest in appreciating assets</p>
      <div id="assetGrid" class="asset-grid">
        <!-- Assets will be added here -->
      </div>
    </div>
  </div>

  <script>
    const elements = {
      money: document.getElementById("money"),
      task: document.getElementById("taskBtn"),
      freelance: document.getElementById("freelanceBtn"),
      invest: document.getElementById("investBtn"),
      message: document.getElementById("message"),
      taskArea: document.getElementById("taskArea"),
      opportunities: document.getElementById("opportunities"),
      highTierOpportunities: document.getElementById("highTierOpportunities"),
      marketSection: document.getElementById("marketSection"),
      marketGrid: document.getElementById("marketGrid"),
      craftingPanel: document.getElementById("craftingPanel"),
      buildingPanel: document.getElementById("buildingPanel"),
      investingPanel: document.getElementById("investingPanel"),
      recipeGrid: document.getElementById("recipeGrid"),
      buildingGrid: document.getElementById("buildingGrid"),
      assetGrid: document.getElementById("assetGrid"),
      partTime: document.getElementById("partTimeBtn"),
      stock: document.getElementById("stockBtn"),
      consulting: document.getElementById("consultingBtn"),
      crypto: document.getElementById("cryptoBtn"),
      startup: document.getElementById("startupBtn")
    };

    // Game state
    const state = {
      money: 1,
      investments: 0,
      investmentCost: 10,
      lastUpdate: Date.now(),
      cooldowns: {
        free: 0,
        partTime: 15,
        stock: 20,
        task: 0,
        consulting: 30,
        crypto: 45,
        startup: 60
      },
      tasksCompleted: 0,
      startups: 0,
      freeMoneyUses: 0,
      market: {
        items: [
          { name: "Coffee Beans", basePrice: 15, volatility: 0.3, currentPrice: 15, owned: 0 },
          { name: "Tech Gadgets", basePrice: 30, volatility: 0.5, currentPrice: 30, owned: 0 },
          { name: "Rare Gems", basePrice: 50, volatility: 0.7, currentPrice: 50, owned: 0 },
          { name: "Art Pieces", basePrice: 75, volatility: 0.4, currentPrice: 75, owned: 0 },
          { name: "Gold Bars", basePrice: 100, volatility: 0.8, currentPrice: 100, owned: 0 },
          { name: "Electronics", basePrice: 45, volatility: 0.4, currentPrice: 45, owned: 0 }
        ],
        lastUpdate: performance.now()
      },
      crafting: {
        recipes: [
          { name: "Premium Coffee", ingredients: [{ name: "Coffee Beans", amount: 3 }], value: 60 },
          { name: "Smart Device", ingredients: [{ name: "Tech Gadgets", amount: 2 }], value: 80 },
          { name: "Jewelry", ingredients: [{ name: "Rare Gems", amount: 2 }], value: 150 },
          { name: "Masterpiece", ingredients: [{ name: "Art Pieces", amount: 2 }], value: 200 },
          { name: "Gold Jewelry", ingredients: [{ name: "Gold Bars", amount: 1 }, { name: "Rare Gems", amount: 1 }], value: 250 },
          { name: "Smart Watch", ingredients: [{ name: "Electronics", amount: 2 }, { name: "Tech Gadgets", amount: 1 }], value: 120 }
        ]
      },
      buildings: [
        { name: "Coffee Shop", cost: 500, income: 50, owned: 0 },
        { name: "Tech Store", cost: 1000, income: 100, owned: 0 },
        { name: "Jewelry Store", cost: 2000, income: 200, owned: 0 },
        { name: "Art Gallery", cost: 5000, income: 500, owned: 0 },
        { name: "Electronics Store", cost: 3000, income: 300, owned: 0 },
        { name: "Shopping Mall", cost: 10000, income: 1000, owned: 0 }
      ],
      assets: [
        { name: "Stock Portfolio", cost: 1000, growth: 0.1, owned: 0 },
        { name: "Real Estate", cost: 5000, growth: 0.2, owned: 0 },
        { name: "Tech Startup", cost: 10000, growth: 0.5, owned: 0 }
      ]
    };

    // Debounced UI update
    let updatePending = false;
    function updateUI() {
      if (!updatePending) {
        updatePending = true;
        requestAnimationFrame(() => {
          elements.money.textContent = `Money: $${Math.floor(Number(state.money))}`;
          elements.invest.classList.toggle("disabled", Number(state.money) < Number(state.investmentCost));
          elements.opportunities.style.display = state.money >= 25 ? "block" : "none";
          elements.highTierOpportunities.style.display = state.money >= 75 ? "block" : "none";
          elements.marketSection.style.display = state.money >= 250 ? "block" : "none";
          elements.craftingPanel.style.display = state.money >= 500 ? "block" : "none";
          elements.buildingPanel.style.display = state.money >= 1000 ? "block" : "none";
          elements.investingPanel.style.display = state.money >= 2500 ? "block" : "none";
          elements.startup.classList.toggle("disabled", state.money < 50);
          updateMarket();
          updateCrafting();
          updateBuildings();
          updateInvestments();
          updatePending = false;
        });
      }
    }

    function updateMarket() {
      if (state.money < 250) return;
      
      const now = performance.now();
      if (now - state.market.lastUpdate > 5000) {
        state.market.items.forEach(item => {
          const change = (Math.random() - 0.5) * item.volatility * item.basePrice;
          item.currentPrice = Math.max(Math.round(item.basePrice * 0.5), 
                                     Math.round(item.currentPrice + change));
        });
        state.market.lastUpdate = now;
      }

      elements.marketGrid.innerHTML = state.market.items.map(item => `
        <div class="market-item">
          <div>
            <div>${item.name}</div>
            <div>Price: $${item.currentPrice}</div>
            <div>Owned: ${item.owned}</div>
          </div>
          <div class="market-actions">
            <button class="market-button" onclick="buyItem('${item.name}')" ${state.money < item.currentPrice ? 'disabled' : ''}>Buy</button>
            <button class="market-button" onclick="sellItem('${item.name}')" ${item.owned === 0 ? 'disabled' : ''}>Sell</button>
          </div>
        </div>
      `).join('');
    }

    function buyItem(name) {
      const item = state.market.items.find(i => i.name === name);
      if (state.money >= item.currentPrice) {
        state.money -= item.currentPrice;
        item.owned++;
        showMessage(`Bought ${item.name} for $${item.currentPrice}`);
        updateUI();
      }
    }

    function sellItem(name) {
      const item = state.market.items.find(i => i.name === name);
      if (item.owned > 0) {
        state.money += item.currentPrice;
        item.owned--;
        showMessage(`Sold ${item.name} for $${item.currentPrice}`);
        updateUI();
      }
    }

    function updateCrafting() {
      if (state.money < 500) return;
      
      elements.recipeGrid.innerHTML = state.crafting.recipes.map(recipe => {
        const canCraft = recipe.ingredients.every(ing => 
          state.market.items.find(i => i.name === ing.name)?.owned >= ing.amount
        );
        return `
          <div class="recipe-item">
            <div>${recipe.name} (Sells for $${recipe.value})</div>
            <div>Requires: ${recipe.ingredients.map(i => `${i.amount}x ${i.name}`).join(', ')}</div>
            <button onclick="craftItem('${recipe.name}')" ${canCraft ? '' : 'disabled'}>
              Craft
            </button>
          </div>
        `;
      }).join('');
    }

    function updateBuildings() {
      if (state.money < 1000) return;

      elements.buildingGrid.innerHTML = state.buildings.map(building => `
        <div class="building-item">
          <div>${building.name}</div>
          <div>Cost: $${building.cost}</div>
          <div>Income: $${building.income}/min</div>
          <div>Owned: ${building.owned}</div>
          <button onclick="buyBuilding('${building.name}')" 
            ${state.money < building.cost ? 'disabled' : ''}>
            Buy
          </button>
        </div>
      `).join('');
    }

    function updateInvestments() {
      if (state.money < 2500) return;

      elements.assetGrid.innerHTML = state.assets.map(asset => `
        <div class="asset-item">
          <div>${asset.name}</div>
          <div>Cost: $${asset.cost}</div>
          <div>Growth: ${asset.growth * 100}%/min</div>
          <div>Owned: ${asset.owned}</div>
          <button onclick="buyAsset('${asset.name}')" 
            ${state.money < asset.cost ? 'disabled' : ''}>
            Buy
          </button>
        </div>
      `).join('');
    }

    function craftItem(name) {
      const recipe = state.crafting.recipes.find(r => r.name === name);
      if (!recipe) return;
      
      const canCraft = recipe.ingredients.every(ing => {
        const item = state.market.items.find(i => i.name === ing.name);
        return item?.owned >= ing.amount;
      });

      if (canCraft) {
        recipe.ingredients.forEach(ing => {
          const item = state.market.items.find(i => i.name === ing.name);
          item.owned -= ing.amount;
        });
        changeMoney(recipe.value, 'crafting');
        showMessage(`üõ†Ô∏è Crafted ${recipe.name} for $${recipe.value}!`);
        updateUI();
      }
    }

    function buyBuilding(name) {
      const building = state.buildings.find(b => b.name === name);
      if (!building || state.money < building.cost) return;
      
      changeMoney(-building.cost, 'building-purchase');
      building.owned++;
      showMessage(`üèóÔ∏è Purchased ${building.name}!`);
      updateUI();
    }

    function buyAsset(name) {
      const asset = state.assets.find(a => a.name === name);
      if (!asset || state.money < asset.cost) return;
      
      changeMoney(-asset.cost, 'asset-purchase');
      asset.owned++;
      showMessage(`üíπ Invested in ${asset.name}!`);
      updateUI();
    }

    // Add building and asset income to the game loop
    let lastTick = Date.now();
    function gameLoop() {
      const now = Date.now();
      const delta = now - lastTick;
      
      // Update cooldowns every 100ms
      if (now - lastCooldownCheck() >= 100) {
        updateCooldowns();
        lastCooldownCheck = now;
      }

      if (delta >= 2000) {
        // Passive income from investments
        if (state.investments > 0) {
          changeMoney(state.investments, 'passive-investment');
        }
        if (state.startups > 0) {
          changeMoney(state.startups * 5, 'passive-startup');
        }

        // Building income (every minute)
        if (delta >= 60000) {
          state.buildings.forEach(building => {
            if (building.owned > 0) {
              changeMoney(building.owned * building.income, 'building-income');
            }
          });

          // Asset growth (every minute)
          state.assets.forEach(asset => {
            if (asset.owned > 0) {
              const growth = Math.floor(state.money * (asset.growth * asset.owned));
              changeMoney(growth, 'asset-growth');
            }
          });
          
          lastTick = now;
        }
      }
      
      requestAnimationFrame(gameLoop);
    }

    // Start game loop
    gameLoop();

    // Add money handling function near the top after state declaration
    function changeMoney(amount, source) {
      const oldMoney = state.money;
      state.money = Math.max(0, Number(state.money) + Number(amount));
      console.log(`Money changed: ${oldMoney} -> ${state.money} (${amount}) from ${source}`);
      updateUI();
    }

    // Replace the startCooldown function with this fixed version
    function startCooldown(button, duration, increment) {
      if (!button || duration === undefined) return duration;
      
      const startTime = Date.now();
      const endTime = startTime + (Math.max(0, duration) * 1000);
      button.disabled = true;

      const updateCooldown = () => {
        const now = Date.now();
        const remaining = Math.ceil((endTime - now) / 1000);

        if (remaining > 0) {
          button.textContent = `Cooldown: ${remaining}s`;
          requestAnimationFrame(updateCooldown);
        } else {
          button.disabled = false;
          button.textContent = button.dataset.originalText;
          if (increment) {
            return duration + 8;
          }
        }
      };

      updateCooldown();
      return increment ? duration + 8 : duration;
    }

    // Store original button text for all buttons
    elements.task.dataset.originalText = "Do Task";
    elements.freelance.dataset.originalText = "Free Money?";
    elements.partTime.dataset.originalText = "Work Part-Time Job (+$10)";
    elements.stock.dataset.originalText = "Stock Market (Risky)";
    elements.consulting.dataset.originalText = "Consulting Work (+$30)";
    elements.crypto.dataset.originalText = "Crypto Trading (Very Risky)";
    elements.startup.dataset.originalText = "Launch Startup (-$50, Passive +$5)";

    // Initialize cooldowns
    let lastCooldownCheck = Date.now();
    const buttonCooldowns = new Map();

    function updateCooldowns() {
      const now = Date.now();
      buttonCooldowns.forEach((cooldown, button) => {
        if (now >= cooldown.endTime) {
          button.disabled = false;
          button.textContent = button.dataset.originalText;
          buttonCooldowns.delete(button);
        }
      });
    }

    // Update gameLoop to include cooldown checks
    function gameLoop() {
      const now = Date.now();
      const delta = now - lastTick;
      
      // Update cooldowns every 100ms
      if (now - lastCooldownCheck() >= 100) {
        updateCooldowns();
        lastCooldownCheck = now;
      }

      if (delta >= 2000) {
        // Passive income from investments
        if (state.investments > 0) {
          changeMoney(state.investments, 'passive-investment');
        }
        if (state.startups > 0) {
          changeMoney(state.startups * 5, 'passive-startup');
        }

        // Building income (every minute)
        if (delta >= 60000) {
          state.buildings.forEach(building => {
            if (building.owned > 0) {
              changeMoney(building.owned * building.income, 'building-income');
            }
          });

          // Asset growth (every minute)
          state.assets.forEach(asset => {
            if (asset.owned > 0) {
              const growth = Math.floor(state.money * (asset.growth * asset.owned));
              changeMoney(growth, 'asset-growth');
            }
          });
          
          lastTick = now;
        }
      }
      
      requestAnimationFrame(gameLoop);
    }

    // Update the handleTaskSubmission function
    function handleTaskSubmission(e) {
      const button = e.target;
      const isWord = button.hasAttribute('data-word');
      const input = document.getElementById(isWord ? 'wordInput' : 'answer');
      const correct = isWord ? 
        input.value.trim() === button.dataset.word :
        parseInt(input.value) === parseInt(button.dataset.answer);

      if (correct) {
        changeMoney(1, 'task-completion');
        state.tasksCompleted++;
        const cooldownTime = state.tasksCompleted * 1;  // 1 second per completed task
        elements.task.disabled = true;
        buttonCooldowns.set(elements.task, {
          endTime: Date.now() + (cooldownTime * 1000)
        });
        showMessage(isWord ? "‚ú® Well done! You earned $1." : "‚úÖ Correct! You earned $1.");
      } else {
        showMessage("‚ùå Wrong answer. No money earned.");
      }
      
      updateUI();
      elements.taskArea.innerHTML = "";
    }

    // Update button click handlers to use buttonCooldowns
    elements.freelance.addEventListener("click", () => {
      if (!elements.freelance.disabled) {
        changeMoney(5, 'freelance');
        state.freeMoneyUses++;
        showMessage(`üíª You got $5 for free!`);
        const cooldownTime = state.cooldowns.free + (state.freeMoneyUses * 5);
        buttonCooldowns.set(elements.freelance, {
          endTime: Date.now() + (cooldownTime * 1000)
        });
        elements.freelance.disabled = true;
      }
    });

    elements.invest.addEventListener("click", () => {
      if (state.money >= state.investmentCost) {
        changeMoney(-state.investmentCost, 'investment-purchase');
        state.investments++;
        state.investmentCost += 5;
        elements.invest.textContent = `Invest $${state.investmentCost}`;
        showMessage(`üìä You now have ${state.investments} investment(s)`);
      }
    });

    elements.partTime.addEventListener("click", () => {
      if (!elements.partTime.disabled) {
        changeMoney(10, 'part-time');
        showMessage("üõ†Ô∏è You worked a part-time job and earned $10!");
        state.cooldowns.partTime = startCooldown(elements.partTime, state.cooldowns.partTime, true);
      }
    });

    elements.stock.addEventListener("click", () => {
      if (!elements.stock.disabled) {
        const outcome = Math.random() < 0.5;
        changeMoney(outcome ? 20 : -10, 'stock-market');
        showMessage(outcome ? "üìà Lucky! +$20" : "üìâ Ouch! -$10");
        state.cooldowns.stock = startCooldown(elements.stock, state.cooldowns.stock, true);
      }
    });

    elements.consulting.addEventListener("click", () => {
      if (!elements.consulting.disabled) {
        changeMoney(30, 'consulting');
        showMessage("üíº You completed a consulting project! +$30");
        state.cooldowns.consulting = startCooldown(elements.consulting, state.cooldowns.consulting, true);
      }
    });

    elements.crypto.addEventListener("click", () => {
      if (!elements.crypto.disabled) {
        const outcome = Math.random() < 0.3;
        changeMoney(outcome ? 50 : -25, 'crypto');
        showMessage(outcome ? "üöÄ Crypto investment successful! +$50" : "üí• Crypto market crashed! -$25");
        state.cooldowns.crypto = startCooldown(elements.crypto, state.cooldowns.crypto, true);
      }
    });

    elements.startup.addEventListener("click", () => {
      if (!elements.startup.disabled && state.money >= 50) {
        changeMoney(-50, 'startup-purchase');
        state.startups++;
        showMessage("üöÄ You launched a startup! It will generate $5 every 2 seconds.");
        state.cooldowns.startup = startCooldown(elements.startup, state.cooldowns.startup, true);
      }
    });

    function generateTask() {
      elements.taskArea.innerHTML = "";
      const taskType = Math.random() < 0.5 ? "math" : "word";
      const difficulty = Math.min(Math.floor(state.tasksCompleted / 10), 3);

      if (taskType === "math") {
        const operations = ['+', '-', '*'];
        const op = operations[Math.floor(Math.random() * (difficulty > 1 ? 3 : 1))];
        const a = Math.floor(Math.random() * (10 * (difficulty + 1)));
        const b = Math.floor(Math.random() * (10 * (difficulty + 1)));
        const correct = eval(`${a} ${op} ${b}`);
        elements.taskArea.innerHTML = `
            Solve: ${a} ${op} ${b} = 
            <input id="answer" type="number"> 
            <button id="submitTask" data-answer="${correct}">Submit</button>
          `;
      } else {
        const words = [
            ["code", "game", "task"],
            ["money", "wealth", "invest"],
            ["javascript", "business", "success"],
            ["entrepreneur", "innovation", "technology"]
        ];
        const word = words[difficulty][Math.floor(Math.random() * 3)];
        elements.taskArea.innerHTML = `
            Type this word: <b>${word}</b><br>
            <input id="wordInput"> 
            <button id="submitTask" data-word="${word}">Submit</button>
          `;
      }
    }

    // Improve cooldown handling
    function startCooldown(button, duration, increment = false) {
        if (!button || duration === undefined) return duration;
        
        const startTime = Date.now();
        const endTime = startTime + (Math.max(0, duration) * 1000);
        button.disabled = true;

        const updateCooldown = () => {
          const now = Date.now();
          const remaining = Math.ceil((endTime - now) / 1000);

          if (remaining > 0) {
            button.textContent = `Cooldown: ${remaining}s`;
            requestAnimationFrame(updateCooldown);
          } else {
            button.disabled = false;
            button.textContent = button.dataset.originalText;
            if (increment) {
              return duration + 8;
            }
          }
        };

        updateCooldown();
        return increment ? duration + 8 : duration;
    }

    // Add success/error animations to message display
    function showMessage(msg, isSuccess = true) {
        elements.message.style.opacity = 1;
        elements.message.textContent = msg;
        elements.message.className = isSuccess ? 'task-success' : 'task-error';
        setTimeout(() => {
            elements.message.style.opacity = 0;
        }, 2000);
    }

    // Initial UI update
    updateUI();
  </script>
</body>
</html>


