<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Empire</title>
<style>
body {
  background: radial-gradient(circle at top, #1c1c1c, #0d0d0d);
  color: #eee;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 { margin-top: 20px; letter-spacing: 2px; }

/* ==== GRID ==== */
#game {
  display: grid;
  grid-template-columns: repeat(10, 45px);
  grid-template-rows: repeat(10, 45px);
  gap: 3px;
  margin-top: 20px;
}

.tile {
  width: 45px;
  height: 45px;
  border-radius: 5px;
  cursor: pointer;
  transition: transform 0.1s, background 0.2s, box-shadow 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.tile:hover { transform: scale(1.1); box-shadow: 0 0 6px #aaa; }

.grass  { background: #357a38; }
.farm   { background: #e3a93b; }
.house  { background: #4d7cff; }
.mine   { background: #8e8e8e; }
.market { background: #c2462f; }

/* ==== INFO PANEL ==== */
#info { margin-top: 15px; text-align: center; }
button {
  margin: 4px; padding: 6px 12px;
  background: #555; color: #fff; border: none; border-radius: 6px; cursor: pointer;
}
button:hover { background: #777; }
button:disabled { background: #333; cursor: not-allowed; opacity: 0.6; }

#alert { margin-top: 10px; color: #f44; font-weight: bold; }

/* ==== MODAL ==== */
#tutorial {
  position: fixed; inset: 0;
  background: rgba(10,10,10,0.92); color:#fff;
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  text-align:center; font-size:16px; padding:20px;
}
#tutorial button { margin-top:20px; background:#4caf50; }

/* ==== TECH TREE ==== */
#techTree {
  margin-top: 15px;
  border: 1px solid #444;
  padding: 10px;
  width: 340px;
  text-align: left;
  background: rgba(255,255,255,0.05);
  border-radius: 8px;
}
#techTree h3 { margin:5px 0; }
#techTree p { margin:4px 0; font-size:14px; }
</style>
</head>
<body>

<h1>Mini Empire</h1>

<div id="info">
  <div>
    ğŸ Food: <span id="food">10</span> |
    ğŸ’° Money: <span id="money">10</span> |
    ğŸ‘¥ Population: <span id="pop">0</span> |
    ğŸ… Level: <span id="levelNum">1</span>
  </div>
  <div>
    <button id="buildFarm">Farm (ğŸ’°5)</button>
    <button id="buildHouse">House (-5 Food)</button>
    <button id="buildMine" disabled>Mine (ğŸ’°8)</button>
    <button id="buildMarket" disabled>Market (ğŸ’°15)</button>
  </div>
  <div id="alert"></div>
</div>

<div id="game"></div>

<div id="techTree">
  <h3>ğŸ”¬ Tech Tree</h3>
  <p id="techFarm">âœ” Farms: unlocked from start</p>
  <p id="techMine">âŒ Unlock Mines (reach ğŸ’°50)</p>
  <p id="techMarket">âŒ Unlock Markets (reach ğŸ’°150)</p>
  <p id="techVictory">âŒ Reach ğŸ’°500 to win!</p>
</div>

<div id="tutorial">
  <h2>Welcome to Mini Empire</h2>
  <p>
    Build your civilization from the ground up.<br><br>
    ğŸŸ© Grass = empty land<br>
    ğŸŸ§ Farm = produces food<br>
    ğŸŸ¦ House = increases population (uses food)<br>
    â¬œ Mine = produces money<br>
    ğŸŸ¥ Market = boosts all income<br><br>
    Balance food and money wisely.<br>
    Unlock new buildings as your wealth grows!
  </p>
  <button id="startGame">Start Game</button>
</div>

<script>
  // ------------------ VARIABLES ------------------
  const game = document.getElementById("game");
  const foodDisplay = document.getElementById("food");
  const moneyDisplay = document.getElementById("money");
  const popDisplay = document.getElementById("pop");
  const levelDisplay = document.getElementById("levelNum");
  const alertBox = document.getElementById("alert");

  const buildFarmBtn = document.getElementById("buildFarm");
  const buildHouseBtn = document.getElementById("buildHouse");
  const buildMineBtn = document.getElementById("buildMine");
  const buildMarketBtn = document.getElementById("buildMarket");

  const tutorial = document.getElementById("tutorial");
  const startBtn = document.getElementById("startGame");

  const techMine = document.getElementById("techMine");
  const techMarket = document.getElementById("techMarket");
  const techVictory = document.getElementById("techVictory");

  let mode = "none", food=10, money=10, pop=0, level=1, running=false;

  // ------------------ CREATE GRID ------------------
  for (let i=0;i<100;i++){
    const tile=document.createElement("div");
    tile.classList.add("tile","grass");
    tile.title = "Empty land";
    tile.addEventListener("click",()=>build(tile));
    game.appendChild(tile);
  }

  // ------------------ BUILD SYSTEM ------------------
  buildFarmBtn.onclick  = ()=> mode="farm";
  buildHouseBtn.onclick = ()=> mode="house";
  buildMineBtn.onclick  = ()=> mode="mine";
  buildMarketBtn.onclick = ()=> mode="market";

  function build(tile){
    if(!running || !tile.classList.contains("grass")) return;
    switch(mode){
      case "farm":
        if(money>=5){ money-=5; tile.className="tile farm"; tile.title="Farm: +2 food"; }
        break;
      case "house":
        if(food>=5){ food-=5; pop+=2; tile.className="tile house"; tile.title="House: uses 5 food, +2 pop"; }
        break;
      case "mine":
        if(money>=8 && level>=2){ money-=8; tile.className="tile mine"; tile.title="Mine: +3 money"; }
        break;
      case "market":
        if(money>=15 && level>=3){ money-=15; tile.className="tile market"; tile.title="Market: boosts all production"; }
        break;
    }
    updateStats();
  }

  // ------------------ GAME LOOP ------------------
  function gameLoop(){
    if(!running) return;

    const farms = document.querySelectorAll(".farm").length;
    const houses = document.querySelectorAll(".house").length;
    const mines = document.querySelectorAll(".mine").length;
    const markets = document.querySelectorAll(".market").length;

    const boost = 1 + markets*0.1;
    food += (farms*2 - pop*0.4)*boost;
    money += (houses*1 + mines*3)*boost;

    if(food>pop*2) pop+=0.1;
    if(money>=50 && level<2) unlockTech(2,"Mines unlocked!",buildMineBtn,techMine);
    if(money>=150 && level<3) unlockTech(3,"Markets unlocked!",buildMarketBtn,techMarket);
    if(money>=500){ running=false; alertBox.textContent="ğŸ† Victory! Your empire thrives!"; techVictory.textContent="âœ” You have achieved victory!"; }
    if(food<=0){ running=false; food=0; alertBox.textContent="â˜  Your people have starved! Game Over."; }

    updateStats();
  }

  // ------------------ TECH UNLOCK ------------------
  function unlockTech(newLevel,msg,btn,techText){
    level=newLevel;
    btn.disabled=false;
    alertBox.textContent=msg;
    techText.textContent=techText.textContent.replace("âŒ","âœ”");
  }

  // ------------------ UI ------------------
  function updateStats(){
    foodDisplay.textContent=Math.floor(food);
    moneyDisplay.textContent=Math.floor(money);
    popDisplay.textContent=Math.floor(pop);
    levelDisplay.textContent=level;
  }

  // ------------------ START ------------------
  startBtn.onclick=()=>{
    tutorial.style.display="none";
    running=true;
    setInterval(gameLoop,1200);
  };
</script>
</body>
</html>
